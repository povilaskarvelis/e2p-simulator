<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Understanding Predictive Value of Effect Sizes</title>
    
    <!-- Load libraries first -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/10.6.1/math.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Load styles -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/binary.css">
    <link rel="stylesheet" href="css/continuous.css">
    
    <!-- MathJax for professional equation rendering -->
    <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.auto.min.js"></script>
    <script>
    window.MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']],
            displayMath: [['$$', '$$'], ['\\[', '\\]']],
        },
        svg: {
            scale: 1,                    // global scaling factor
            minScale: .5,               // smallest scaling factor to use
            mtextInheritFont: false,
            merrorInheritFont: true,
            mathmlSpacing: false,        // true for MathML spacing rules, false for TeX rules
            skipAttributes: {},          // RFDa and other attributes NOT to copy to the output
            exFactor: .5,                // default size of ex in em units
            displayAlign: 'center',      // default for indentalign when set to 'auto'
            displayIndent: '0',          // default for indentshift when set to 'auto'
            versionWarning: false,
        },
        options: {
            enableMenu: false,           // disable the MathJax context menu
            menuOptions: {
                settings: {
                    zoom: "Click",       // or "Double-Click" or "None"
                    zscale: "200%",
                }
            }
        }
    };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
</head>
<body>
    <!-- Header Container -->
    <body>
    <h1>Understanding predictive value of effect sizes</h1>

    <div class="description">
        <p>This interactive tool demonstrates how statistical effect sizes translate into predictive utility, 
            allowing you to explore the effects of measurement reliability and outcome base rates.</p>
    </div>

    <!-- Version Selection -->
    <div style="margin-bottom: 20px;">
        <div style="text-align: left;">
            <button id="binary-button" class="toggle-button active">Binary</button>
            <button id="continuous-button" class="toggle-button">Continuous</button>
        </div>
    </div>
</body> 
    
    <!-- Binary Container -->
    <!-- Binary Version -->
<div id="binary-container">
    <div class="main-container">
        <!-- Sliders and inputs -->
        <div class="slider-section">
            <div class="slider-container">
                <!-- Cohen's d and other metrics -->
                <div>
                    <input type="range" id="difference-slider" min="0" max="5" step="0.01" value="0.5" style="width: 100%; margin-bottom: 10px;">
                    
                    <!-- Continuous Metrics -->
                    <div style="display: flex; flex-direction: column; gap: 10px; margin-bottom: 30px;">
                        <div class="metrics-header">
                            <span></span>
                            <span>True</span>
                            <span>Obs.</span>
                        </div>

                        <!-- Cohen's d -->
                        <div style="display: flex; align-items: center; justify-content: space-between;">
                            <span class="slider-label" data-tooltip="Standardized mean difference between groups">Cohen's d</span>
                            <input type="number" id="true-difference-number-bin" min="0" max="5" step="0.01" value="0.5" style="width: 50px; text-align: right;">
                            <input type="number" id="observed-difference-number-bin" min="0" max="5" step="0.01" value="1" style="width: 50px; text-align: right;" readonly>
                        </div>

                        <!-- Odds Ratio -->
                        <div style="display: flex; align-items: center; justify-content: space-between;">
                            <span class="slider-label" data-tooltip="Ratio of odds of being in group 1 vs group 2">Odds Ratio</span>
                            <input type="number" id="true-odds-ratio-bin" min="1" max = "8681" step="1" value="1" style="width: 50px; text-align: right;">
                            <input type="number" id="observed-odds-ratio-bin" min="1" max = "8681" step="1" value="1" style="width: 50px; text-align: right;" readonly>
                        </div>

                        <!-- Log Odds Ratio -->
                        <div style="display: flex; align-items: center; justify-content: space-between;">
                            <span class="slider-label" data-tooltip="Natural logarithm of the odds ratio">Log Odds Ratio</span>
                            <input type="number" id="true-log-odds-ratio-bin" step="0.05" value="0" style="width: 50px; text-align: right;">
                            <input type="number" id="observed-log-odds-ratio-bin" step="0.05" value="0" style="width: 50px; text-align: right;" readonly>
                        </div>

                        <!-- Point-biserial r -->
                        <div style="display: flex; align-items: center; justify-content: space-between;">
                            <span class="slider-label" data-tooltip="Point-biserial r: correlation between a continuous variable and a binary variable">Point-biserial r</span>
                            <input type="number" id="true-pb-r-bin" min="0" max="0.93" step="0.01" value="0" style="width: 50px; text-align: right;">
                            <input type="number" id="observed-pb-r-bin" min="0" max="0.93" step="0.01" value="0" style="width: 50px; text-align: right;" readonly>
                        </div>

                        <!-- Eta squared -->
                        <div style="display: flex; align-items: center; justify-content: space-between;">
                            <span class="slider-label" data-tooltip="Eta squared: proportion of variance explained by group membership">η²</span>
                            <input type="number" id="true-eta-squared-bin" min="0" max="1" step="0.01" value="0" style="width: 50px; text-align: right;">
                            <input type="number" id="observed-eta-squared-bin" min="0" max="1" step="0.01" value="0" style="width: 50px; text-align: right;" readonly>
                        </div>
                    </div>
                </div>
                
                <!-- Reliability Controls -->
                <div style="margin-top: 20px; margin-bottom: 20px;">
                    <!-- Group 1 Reliability -->
                    <input type="range" id="icc1-slider" min="0" max="1" step="0.01" value="0.5">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 2px;">
                        <span class="slider-label" data-tooltip="Measurement reliability of the predictor in group 1">Group 1 reliability</span>
                        <input type="number" id="icc1-number" min="0" max="1" step="0.01" value="0.5" style="width: 60px;">
                    </div>
                    
                    <!-- Group 2 Reliability -->
                    <input type="range" id="icc2-slider" min="0" max="1" step="0.01" value="0.5" style="margin-top: 15px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 2px;">
                        <span class="slider-label" data-tooltip="Measurement reliability of the predictor in group 2">Group 2 reliability</span>
                        <input type="number" id="icc2-number" min="0" max="1" step="0.01" value="0.5" style="width: 60px;">
                    </div>
                    
                    <!-- Classification Reliability -->
                    <input type="range" id="iccc-slider" min="0" max="1" step="0.01" value="0.5" style="margin-top: 15px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 2px;">
                        <span class="slider-label" data-tooltip="Reliability of the group assignment">Grouping reliability</span>
                        <input type="number" id="iccc-number" min="0" max="1" step="0.01" value="0.5" style="width: 60px;">
                    </div>
                </div>

                <!-- Base rate -->
                <div>
                    <input type="range" id="base-rate-slider" min="0" max="100" step="0.1" value="50">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 5px;">
                        <span class="slider-label" data-tooltip="Percentage of cases in group 2">Base rate (%)</span>
                        <input type="number" id="base-rate-number" min="0" max="100" step="0.1" value="50" style="width: 60px;">
                    </div>
                </div>
            </div>
        </div>

        <!-- Plot 1: Overlapping distributions -->
        <div class="main-plot-section">
            <!-- Toggle buttons -->
            <div style="text-align: left; margin-bottom: 10px;">
                <button id="true-button-bin" class="toggle-button">True</button>
                <button id="observed-button-bin" class="toggle-button active">Observed</button>
            </div>
            <div id="overlap-plot" class="plot"></div>
        </div>

        <!-- Plot 2: ROC curve -->
        <div class="roc-pr-section">
            <div class="plot-container">
                <div id="roc-plot" class="half-plot" data-tooltip="Receiver operating characteristic (ROC) curve"></div>
                <div id="pr-plot" class="half-plot" data-tooltip="Precision-Recall (PR) curve"></div>
            </div>
        </div>
    </div>

    <!-- Results dashboard -->
    <div id="dashboard" class="dashboard">
        <div class="dashboard-metrics">
            <p style="display: none;">AUC: <span id="auc-value">0.00%</span></p>
            <p data-tooltip="Percentage of all cases correctly classified">Accuracy: <span id="accuracy-value">0.00%</span></p>
            <p data-tooltip="Percentage of true positive cases correctly identified">Sensitivity: <span id="sensitivity-value">0.00%</span></p>
            <p data-tooltip="Percentage of true negative cases correctly identified">Specificity: <span id="specificity-value">0.00%</span></p>
            <p data-tooltip="Balanced accuracy - average of sensitivity and specificity">BAcc: <span id="balanced-accuracy-value">0.00%</span></p>
            <p data-tooltip="Harmonic mean of precision and recall (sensitivity)">F1-score: <span id="f1-value">0.00%</span></p>
            <p data-tooltip="Negative predictive value - percentage of negative predictions that are correct">NPV: <span id="npv-value">0.00%</span></p>
            <p data-tooltip="Positive predictive value - percentage of positive predictions that are correct">PPV: <span id="precision-value">0.00%</span></p>
            <p data-tooltip="Matthews Correlation Coefficient - balanced measure of classification quality">MCC: <span id="mcc-value">0.00</span></p>
        </div>
    </div>
    
    <!-- Equations Section -->
    <div class="equations-container">
        <!-- Reliability attenuation -->
        <div class="equation-box wide">
            <a href="https://osf.io/preprints/psyarxiv/z4yqe_v3" style="text-decoration: none; color: inherit;">
                <p class="equation-title">Cohen's d attenuation by reliability</p>
                <div class="equation-content">
                    \[d_{obs} = d_{true} \sqrt{\frac{2\rho_1\rho_2}{\rho_1+\rho_2} \rho_g}\]
                </div>
            </a>
        </div>
        
        <!-- d to Log Odds Ratio -->
        <div class="equation-box">
            <p class="equation-title">d to Log Odds Ratio</p>
            <div class="equation-content">
                \[\log(OR) = \frac{d\pi}{\sqrt{3}}\]
            </div>
        </div>
        
        <!-- d to AUC -->
        <div class="equation-box">
            <p class="equation-title">d to AUC</p>
            <div class="equation-content">
                \[AUC = \Phi\left(\frac{d}{\sqrt{2}}\right)\]
            </div>
        </div>
        
        <!-- d to Point-biserial r -->
        <div class="equation-box">
            <p class="equation-title">d to Point-biserial r</p>
            <div class="equation-content">
                \[r_{pb} = \frac{d}{\sqrt{d^2 + 4}}\]
            </div>
        </div>
        
        <!-- d to Eta squared -->
        <div class="equation-box">
            <p class="equation-title">d to Eta squared</p>
            <div class="equation-content">
                \[\eta^2 = \frac{d^2}{d^2 + 4}\]
            </div>
        </div>
    </div>

    <!-- Mahalanobis D Calculator -->
    <div style="margin-top: 50px;"></div>
    <h2 style="text-align: center; font-size: clamp(1.2rem, 4vw, 2em); margin-top: 40px;">Mahalanobis D Calculator</h2>
    <div class="description" style="text-align: center; padding: 0 10px; margin-bottom: 20px;">
        <p>This calculator demonstrates how multiple predictors combine to create group separation in multivariate space. 
        Mahalanobis D, just like Cohen's d, can be used to approximate the performance of linear ML models (LDA, logistic regression, linear SVMs) 
        with normally distributed features. Use it to estimate how many predictors you need to achieve your target separation.</p>
    </div>

    <!-- Mahalanobis D Calculator Container -->
    <div class="container mahalanobis-container">
        <div class="section sliders">
            <!-- Mahalanobis D equation box -->
            <div class="equation-box flat">
                <p class="equation-title">Mahalanobis D formula when all predictors have the same effect size and collinearity:</p>
                <div class="equation-content">
                    \[D = d \sqrt{\dfrac{p}{1 + (p-1)r_{ij}}}\]
                </div>
            </div>
            
            <div class="form-container">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <span class="slider-label">Needed Mahalanobis D</span>
                    <input type="number" id="neededD" title="Enter the needed Mahalanobis D" step="0.01" value="3" class="slider-value" required>
                </div>

                <!-- Effect size slider -->
                <div class="slider-container">
                    <input type="range" id="effectSize-slider" min="0.1" max="2" step="0.01" value="0.5" class="slider">
                    <div class="slider-value-container">
                        <span class="slider-label">Effect size of each predictor (d)</span>
                        <input type="number" id="effectSize" min="0.1" max="2" step="0.01" value="0.5" class="slider-value">
                    </div>
                </div>

                <!-- Correlation slider -->
                <div class="slider-container">
                    <input type="range" id="correlation-slider" min="0" max="1" step="0.01" value="0.1" class="slider">
                    <div class="slider-value-container">
                        <span class="slider-label">Collinearity among predictors (r_ij)</span>
                        <input type="number" id="correlation" min="0" max="1" step="0.01" value="0.1" class="slider-value">
                    </div>
                </div>

                <!-- Number of variables slider -->
                <div class="slider-container">
                    <input type="range" id="numVariables-slider" min="1" max="100" step="1" value="50" class="slider">
                    <div class="slider-value-container">
                        <span class="slider-label">Number of predictors (p)</span>
                        <input type="number" id="numVariables" min="1" max="100" step="1" value="50" class="slider-value">
                    </div>
                </div>

                <div style="display: flex; gap: 10px;">
                    <button id="record-mahalanobis">Record curve</button>
                    <button id="reset-mahalanobis">Reset</button>
                </div>
            </div>
        </div>
        <div class="section">
            <div id="chartContainer">
                <canvas id="dPlot"></canvas>
            </div>
        </div>
    </div> 
</div> 
    
    <!-- Continuous Container -->
    <!-- Continuous Version -->
<div id="continuous-container" style="display: none;">
    <div class="main-container">
        <!-- Column 1: Sliders -->
        <div class="slider-section">
            <div class="slider-container">
                <!-- True and Observed Effects -->
                <input type="range" id="effect-slider-cont" min="0" max="1" step="0.01" value="0.50" style="width: 100%; margin-bottom: 10px;">

                <!-- Continuous Metrics -->
                <div style="display: flex; flex-direction: column; gap: 10px; margin-bottom: 20px;">
                    <div class="metrics-header">
                        <span></span>
                        <span>True</span>
                        <span>Obs.</span>
                    </div>

                    <!-- Pearson's r -->
                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <span class="slider-label" data-tooltip="Linear correlation between predictor and outcome">Pearson's r</span>
                        <input type="number" id="true-pearson-r-cont" min="0" max="1" step="0.01" value="0.50" style="width: 50px; text-align: right;">
                        <input type="number" id="observed-pearson-r-cont" min="0" max="1" step="0.01" value="0.50" style="width: 50px; text-align: right;" readonly>
                    </div>

                    <!-- R² -->
                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <span class="slider-label" data-tooltip="Proportion of variance in outcome explained by predictor">R²</span>
                        <input type="number" id="true-R-squared-cont" min="0" max="1" step="0.01" value="0" style="width: 50px; text-align: right;" readonly>
                        <input type="number" id="observed-R-squared-cont" min="0" max="1" step="0.01" value="0" style="width: 50px; text-align: right;" readonly>
                    </div>
                </div>

                <!-- Reliability X -->
                <input type="range" id="reliability-x-slider-cont" min="0" max="1" step="0.01" value="0.5">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 5px;">
                    <span class="slider-label" data-tooltip="Measurement reliability of the predictor variable">Predictor reliability</span>
                    <input type="number" id="reliability-x-number-cont" min="0" max="1" step="0.01" value="0.5" style="width: 60px;">
                </div>

                <!-- Reliability Y -->
                <input type="range" id="reliability-y-slider-cont" min="0" max="1" step="0.01" value="0.5">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 5px;">
                    <span class="slider-label" data-tooltip="Measurement reliability of the outcome variable">Outcome reliability</span>
                    <input type="number" id="reliability-y-number-cont" min="0" max="1" step="0.01" value="0.5" style="width: 60px;">
                </div>

                <!-- Base rate -->
                <div style="margin-top: 20px; margin-bottom: 30px;">
                    <input type="range" id="base-rate-slider-cont" min="0.1" max="99.9" step="0.1" value="50">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 5px;">
                        <span class="slider-label" data-tooltip="Percentage of cases in group 2">Base rate (%)</span>
                        <input type="number" id="base-rate-number-cont" min="0.1" max="99.9" step="0.1" value="50" style="width: 60px;">
                    </div>
                </div>

                <!-- Binary Metrics -->
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <div class="metrics-header">
                        <span></span>
                        <span>True</span>
                        <span>Obs.</span>
                    </div>

                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <span class="slider-label" data-tooltip="Standardized mean difference between groups">Cohen's d</span>
                        <input type="number" id="true-cohens-d-cont" min="0" max="5" step="0.01" value="0.50" style="width: 50px; text-align: right;" readonly>
                        <input type="number" id="observed-cohens-d-cont" min="0" max="5" step="0.01" value="0.50" style="width: 50px; text-align: right;" readonly>
                    </div>
                    
                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <span class="slider-label" data-tooltip="Cohen's d adjusted for unequal group variances">Cohen's d*</span>
                        <input type="number" id="true-cohens-da-cont" min="0" max="5" step="0.01" value="0.50" style="width: 50px; text-align: right;" readonly>
                        <input type="number" id="observed-cohens-da-cont" min="0" max="5" step="0.01" value="0.50" style="width: 50px; text-align: right;" readonly>
                    </div>
                    
                    <!-- Point-biserial r -->
                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <span class="slider-label" data-tooltip="Point-biserial r: correlation between a continuous variable and binary group membership">Point-biserial r</span>
                        <input type="number" id="true-pb-r-cont" min="0" max="0.93" step="0.01" value="0.00" style="width: 50px; text-align: right;" readonly>
                        <input type="number" id="observed-pb-r-cont" min="0" max="0.93" step="0.01" value="0.00" style="width: 50px; text-align: right;" readonly>
                    </div>
                    
                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <span class="slider-label" data-tooltip="Correlation between ranks and binary group membership">Rank-biserial r</span>
                        <input type="number" id="true-rank-biserial-cont" min="-1" max="1" step="0.01" value="0.00" style="width: 50px; text-align: right;" readonly>
                        <input type="number" id="observed-rank-biserial-cont" min="-1" max="1" step="0.01" value="0.00" style="width: 50px; text-align: right;" readonly>
                    </div>

                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <span class="slider-label" data-tooltip="Mean difference divided by standard deviation of group 1">Glass's &Delta;</span>
                        <input type="number" id="true-glass-d-cont" min="0" max="5" step="0.01" value="0.00" style="width: 50px; text-align: right;" readonly>
                        <input type="number" id="observed-glass-d-cont" min="0" max="5" step="0.01" value="0.00" style="width: 50px; text-align: right;" readonly>
                    </div>

                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <span class="slider-label" data-tooltip="Ratio of odds of being in group 2 vs group 1">Odds Ratio</span>
                        <input type="number" id="true-odds-ratio-cont" min="1" step="1" value="1" style="width: 50px; text-align: right;" readonly>
                        <input type="number" id="observed-odds-ratio-cont" min="1" step="1" value="1" style="width: 50px; text-align: right;" readonly>
                    </div>

                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <span class="slider-label" data-tooltip="Natural logarithm of the odds ratio">Log Odds Ratio</span>
                        <input type="number" id="true-log-odds-ratio-cont" step="0.05" value="0" style="width: 50px; text-align: right;" readonly>
                        <input type="number" id="observed-log-odds-ratio-cont" step="0.05" value="0" style="width: 50px; text-align: right;" readonly>
                    </div>

                    <!-- AUC row removed - now only displayed in ROC plot -->
                </div>
            </div>
        </div>

        <!-- Column 2: Plots -->
        <div class="main-plot-section">
            <!-- Toggle buttons -->
            <div style="text-align: left; margin-bottom: 10px;">
                <button id="true-button-cont" class="toggle-button active">True</button>
                <button id="observed-button-cont" class="toggle-button">Observed</button>
            </div>
            <div class="container secondary">
                <!-- Container for both plots -->
                <div class="plots-stack">
                    <div class="scatter-plots">
                        <div id="scatter-plot-true-cont" class="plot" style="display: none;"></div>
                        <div id="scatter-plot-observed-cont" class="plot"></div>
                    </div>
                    <div class="distribution-plots">
                        <div id="distribution-plot-true-cont" class="plot" style="display: none;"></div>
                        <div id="distribution-plot-observed-cont" class="plot"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Column 3: ROC and Dashboard -->
        <div class="roc-pr-section">
            <div class="plot-container">
                <div id="roc-plot-cont" class="half-plot" data-tooltip="Receiver operating characteristic (ROC) curve"></div>
                <div id="pr-plot-cont" class="half-plot" data-tooltip="Precision-Recall (PR) curve"></div>
            </div>
            <div id="dashboard-cont" class="dashboard">
                <div class="dashboard-metrics">
                    <p style="display: none;">AUC: <span id="auc-value-cont">0.00%</span></p>
                    <p data-tooltip="Percentage of all cases correctly classified">Accuracy: <span id="accuracy-value-cont">0.00%</span></p>
                    <p data-tooltip="Percentage of true positive cases correctly identified">Sensitivity: <span id="sensitivity-value-cont">0.00%</span></p>
                    <p data-tooltip="Percentage of true negative cases correctly identified">Specificity: <span id="specificity-value-cont">0.00%</span></p>
                    <p data-tooltip="Balanced accuracy - average of sensitivity and specificity">BAcc: <span id="balanced-accuracy-value-cont">0.00%</span></p>
                    <p data-tooltip="Harmonic mean of precision and recall (sensitivity)">F1-score: <span id="f1-value-cont">0.00%</span></p>
                    <p data-tooltip="Negative predictive value - percentage of negative predictions that are correct">NPV: <span id="npv-value-cont">0.00%</span></p>
                    <p data-tooltip="Positive predictive value - percentage of positive predictions that are correct">PPV: <span id="ppv-value-cont">0.00%</span></p>
                    <p data-tooltip="Matthews Correlation Coefficient - balanced measure of classification quality">MCC: <span id="mcc-value-cont">0.00</span></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Include R-squared Calculator -->
    <!-- Multivariate R² Calculator -->
<div style="margin-top: 50px;"></div>
<h2 style="text-align: center; font-size: clamp(1.2rem, 4vw, 2em); margin-top: 40px;">Multivariate R² Calculator</h2>
<div class="description" style="text-align: center; padding: 0 10px; margin-bottom: 20px;">
    <p>This calculator demonstrates how multiple predictors combine to explain the variance in an outcome. 
    Multivariate R² quantifies predictive power for linear regression models while accounting for predictor collinearity. 
    Use it to estimate how many predictors you need to achieve your target level of explained variance.</p>
</div>

<!-- Multivariate R² Calculator Container -->
<div class="container r-squared-container">
    <div class="section sliders">
        <!-- Multivariate R² equation box -->
        <div class="equation-box flat">
            <p class="equation-title">Multivariate R² formula when all predictors have the same effect size and collinearity:</p>
            <div class="equation-content">
                \[R^2 = \dfrac{pr^2}{1+(p-1)r_{ij}}\]
            </div>
        </div>
        
        <div class="form-container">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span class="slider-label">Needed R²</span>
                <input type="number" id="needed-r2" min="0.1" max="0.9" step="0.01" value="0.6" class="slider-value" required>
            </div>
            
            <!-- Predictor correlation slider -->
            <div class="slider-container">
                <input type="range" id="predictor-correlation-slider" min="0.1" max="0.9" step="0.01" value="0.2" class="slider">
                <div class="slider-value-container">
                    <span class="slider-label">Correlation of each predictor (r)</span>
                    <input type="number" id="predictor-correlation" min="0.1" max="0.9" step="0.01" value="0.2" class="slider-value">
                </div>
            </div>
            
            <!-- Collinearity slider -->
            <div class="slider-container">
                <input type="range" id="collinearity-slider" min="0" max="0.9" step="0.01" value="0.1" class="slider">
                <div class="slider-value-container">
                    <span class="slider-label">Collinearity among predictors (r_ij)</span>
                    <input type="number" id="collinearity" min="0" max="0.9" step="0.01" value="0.1" class="slider-value">
                </div>
            </div>
            
            <!-- Number of predictors slider -->
            <div class="slider-container">
                <input type="range" id="num-predictors-r2-slider" min="1" max="100" step="1" value="20" class="slider">
                <div class="slider-value-container">
                    <span class="slider-label">Number of predictors (p)</span>
                    <input type="number" id="num-predictors-r2" min="1" max="100" step="1" value="20" class="slider-value">
                </div>
            </div>
            
            <div style="display: flex; gap: 10px;">
                <button id="record-r2">Record curve</button>
                <button id="reset-r2">Reset</button>
            </div>
        </div>
    </div>
    
    <div class="section">
        <div id="r2PlotContainer">
            <canvas id="r2Plot"></canvas>
        </div>
    </div>
</div> 
</div> 
    
    <!-- Footer Scripts -->
    <!-- Load scripts at the end of body -->
<!-- Load libraries first -->
<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
<!-- Load shared plugins -->
<script src="js/shared-plugins.js"></script>
<!-- Load our module scripts -->
<script src="js/utils.js"></script>
<script src="js/binary.js"></script>
<script src="js/continuous.js"></script>
<!-- Load main.js last since it depends on the other scripts -->
<script src="js/main.js"></script>
<!-- Add this with your other script tags -->
<script src="js/mahalanobis.js"></script>
<!-- Add this before the closing body tag -->
<script src="js/r-squared.js"></script>
</body>
</html> 
> 
